function trim(s)
  s = string.gsub(s, "^s*(.-)%s*S", "%1")
  return s
end

trim("   this is not trimed ")