function umod(n,d)
  if d < 0 then
    if math.ult(n,d) then return 0
    else return 1
  end
  local q = ((n >> 1) // d) << 1
  local r = n - q * d
  if not math.ult(r, d)
end